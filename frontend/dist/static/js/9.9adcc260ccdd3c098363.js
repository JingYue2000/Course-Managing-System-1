webpackJsonp([9],{"/M/F":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),l=a("exGp"),o=a.n(l),r=a("QqOR"),c=a("UKzA"),s={name:"Home",data:function(){return{query:{nameSearch:"",currentPage:1,pageSize:5},total:0,Height:0,tableData:[],nameSearch:"",multipleSelection:[],isShow:!1,uploadVisible:!1,form:{},id:-1,deleteDialogVisible:!1}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(c.d)(this.query).then(function(t){e.tableData=t.data,t.data&&(e.total=t.data.length)})},handlerClose:function(){this.$set(this.query,"currentPage",1),this.getData()},handleSizeChange:function(e){this.query.currentPage=1,this.query.pageSize=e},handleCurrentChange:function(e){this.query.currentPage=e},uploadFiles:function(){this.uploadVisible=!0},downloadHandle:function(e,t){var n=this;return o()(i.a.mark(function e(){var l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.loadingOverLay=n.$loading({lock:!0,text:"文件生成中",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"}),Object(c.b)(t).then(function(e){a("3UNf")(e,t.filename)}),(l=document.createElement("iframe")).style.display="none",document.body.appendChild(l),n.loadingOverLay.close();case 6:case"end":return e.stop()}},e,n)}))()},deleteHandle:function(e,t){var a=Object(c.a)(t);a.data=1,a.data>0?(this.$message.success("删除成功"),this.tableData.splice(e,1)):this.$message.error("删除失败")},handleDialogClose:function(){this.deleteDialogVisible=!1},mySlice:function(e){return 0!==e.length?e.slice((this.query.currentPage-1)*this.query.pageSize,this.query.currentPage*this.query.pageSize):null}},mounted:function(){var e=this;this.Height=document.documentElement.clientHeight-120,window.onresize=function(){e.Height=document.documentElement.clientHeight-120}},components:{UploadBigFile:r.default}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"text-align":"left"}},[a("div",{staticClass:"el-icon-folder",style:{Height:e.Height+"px"}},[e._v("PM管理系统-文件下载中心")])]),e._v(" "),a("el-main",{style:{minHeight:e.Height+"px"}},[a("router-view"),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mySlice(this.tableData)}},[e.isShow?a("el-table-column",{attrs:{prop:"id",label:"ID",width:"120",align:"center"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"refProjectId",label:"项目ID",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"filename",label:"文件名",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalSizeName",label:"文件大小",width:"200"}}),e._v(" "),e.isShow?a("el-table-column",{attrs:{prop:"location",label:"location",align:"center"}}):e._e(),e._v(" "),e.isShow?a("el-table-column",{attrs:{prop:"identifier",label:"identifier",align:"center"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"uploadTimeString",label:"上传时间",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"blue",attrs:{type:"text",icon:"el-icon-download",size:"small"},on:{click:function(a){return e.downloadHandle(t.$index,t.row)}}},[e._v("下载")]),e._v(" "),a("el-popconfirm",{attrs:{title:"确定删除该文件吗？"},on:{confirm:function(a){return e.deleteHandle(t.$index,t.row)}}},[a("el-button",{staticClass:"red",attrs:{slot:"reference",type:"text",icon:"el-icon-delete",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{align:"center",background:"","current-page":e.query.currentPage,"page-sizes":[1,5,10,20],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"文件上传",center:"",visible:e.uploadVisible,width:"60%",close:e.handlerClose},on:{"update:visible":function(t){e.uploadVisible=t}}},[a("UploadBigFile",{staticClass:"uploadSlot"})],1),e._v(" "),a("el-footer",[a("li",{staticClass:"mr-3 mr-lg-0"},[e._v("© 2020 项目管理, Inc.All rights reserved.")])])],1)},staticRenderFns:[]},u=a("VU/8")(s,d,!1,function(e){a("mUOg"),a("kg+z")},"data-v-63bedc16",null);t.default=u.exports},"3UNf":function(e,t){e.exports=function(e,t,a,n){var i=new Blob(void 0!==n?[n,e]:[e],{type:a||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,t);else{var l=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(i):window.webkitURL.createObjectURL(i),o=document.createElement("a");o.style.display="none",o.href=l,o.setAttribute("download",t),void 0===o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout(function(){document.body.removeChild(o),window.URL.revokeObjectURL(l)},200)}}},"kg+z":function(e,t){},mUOg:function(e,t){}});