webpackJsonp([44],{"/B+H":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mtWM"),n=a.n(i),r=a("PJh5"),s=a.n(r),o={name:"RedisInfo",data:function(){return{loading:!0,redisInfo:[],timer:null,categoriesOne:[],dataOne:[],chartOne:"",categoriesTwo:[],dataTwo:[],chartTwo:""}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},mounted:function(){var t=this;this.getData(),this.timer=setInterval(function(){t.getData()},3e3),this.$get("redis/info").then(function(e){t.redisInfo=e.data.data})},methods:{getData:function(){var t=this;-1!==this.$route.path.indexOf("redis")&&n.a.all([this.$get("redis/keysSize"),this.$get("redis/memoryInfo")]).then(function(e){var a=e[1].data.used_memory/1e3,i=e[0].data.dbSize,n=s()().format("hh:mm:ss");t.dataOne.push(a),t.categoriesOne.push(n),t.dataTwo.push(i),t.categoriesTwo.push(n),t.dataOne.length>=6&&(t.categoriesOne.shift(),t.dataOne.shift()),t.dataTwo.length>=6&&(t.categoriesTwo.shift(),t.dataTwo.shift()),t.lineChartOne("lineChartMemory"),t.lineChartTwo("lineChartKey"),t.loading&&(t.loading=!1)}).catch(function(e){t.loading=!1,t.$message.error("获取Redis信息失败"),t.timer&&clearInterval(t.timer)})},lineChartOne:function(t){this.chartOne=this.$echarts.init(document.getElementById(t)),this.chartOne.setOption({color:["#1890ff","#fcc550","#1890ff","#ff9933","#fa541c","#42b983","#722ed1","#60FFF0","#52c41a","#42b983"],title:{text:"Redis内存实时占用情况（kb）",show:!0},tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:!1,xAxis:{type:"category",boundaryGap:!0,data:this.categoriesOne,axisLabel:{textStyle:{fontSize:"12"}}},yAxis:{type:"value",axisLabel:{textStyle:{fontSize:"12"}}},series:[{name:"内存(kb)",data:this.dataOne,type:"line",areaStyle:{}}]},!0)},lineChartTwo:function(t){this.chartTwo=this.$echarts.init(document.getElementById(t)),this.chartTwo.setOption({color:["#f5564e","#fcc550","#1890ff","#ff9933","#fa541c","#42b983","#722ed1","#60FFF0","#52c41a","#42b983"],title:{text:"Redis key实时数量（个）",show:!0},tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:!1,xAxis:{type:"category",boundaryGap:!0,data:this.categoriesTwo,axisLabel:{textStyle:{fontSize:"12"}}},yAxis:{type:"value",axisLabel:{textStyle:{fontSize:"12"}}},series:[{name:"key数量",data:this.dataTwo,type:"line",areaStyle:{}}]},!0)}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%","margin-top":"1rem"}},[a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:12}},[a("div",{staticStyle:{height:"350px"},attrs:{id:"lineChartMemory"}})]),t._v(" "),a("a-col",{attrs:{span:12}},[a("div",{staticStyle:{height:"350px"},attrs:{id:"lineChartKey"}})])],1),t._v(" "),a("a-row",{attrs:{gutter:8}},[a("a-divider",{attrs:{orientation:"left"}},[t._v("Redis详细信息")]),t._v(" "),a("table",{staticStyle:{"border-bottom":"1px solid #f1f1f1"}},t._l(t.redisInfo,function(e,i){return a("tr",{key:i,staticStyle:{"border-top":"1px solid #f1f1f1"}},[a("td",{staticStyle:{padding:".7rem 1rem"}},[t._v(t._s(e.key))]),t._v(" "),a("td",{staticStyle:{padding:".7rem 1rem"}},[t._v(t._s(e.description))]),t._v(" "),a("td",{staticStyle:{padding:".7rem 1rem"}},[t._v(t._s(e.value))])])}),0)],1)],1)},staticRenderFns:[]},l=a("VU/8")(o,d,!1,function(t){a("brw9")},null,null);e.default=l.exports},brw9:function(t,e){}});