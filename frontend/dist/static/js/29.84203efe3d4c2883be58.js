webpackJsonp([29],{ulsR:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticStyle:{width:"100%"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[l("el-table-column",{attrs:{fixed:"",prop:"pid",label:"项目ID",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"projectName","show-overflow-tooltip":"",label:"项目名称",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"projectDesc",label:"项目简介",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{prop:"projectType",label:"类型",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"managerName",label:"项目经理",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"teacherName",label:"指导老师",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"startTime",label:"开始时间","show-overflow-tooltip":"",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{prop:"endTime",label:"结束时间","show-overflow-tooltip":"",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看项目细节",placement:"top"}},[l("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-view",circle:""},on:{click:function(l){return e.handleViewClick(t.row)}}})],1),e._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改项目信息",placement:"top"}},[l("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(l){return e.handleEditClick(t.row)}}})],1),e._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除该项目",placement:"top"}},[l("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){return e.handleDeleteClick(t.row)}}})],1)]}}])})],1),e._v(" "),l("div",[l("el-dialog",{attrs:{center:"",title:"项目详细信息",visible:e.ViewDialogVisible,width:"50%"},on:{"update:visible":function(t){e.ViewDialogVisible=t}}},[l("span",[l("div",[l("el-form",{ref:"projectForm",attrs:{model:e.projectInfo,"label-width":"80px",inline:""}},[l("el-form-item",{attrs:{label:"项目名称"}},[l("el-input",{staticStyle:{width:"485px"},attrs:{disabled:""},model:{value:e.projectInfo.projectName,callback:function(t){e.$set(e.projectInfo,"projectName",t)},expression:"projectInfo.projectName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目经理"}},[l("el-input",{attrs:{disabled:""},model:{value:e.projectInfo.managerName,callback:function(t){e.$set(e.projectInfo,"managerName",t)},expression:"projectInfo.managerName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"指导老师"}},[l("el-input",{attrs:{disabled:""},model:{value:e.projectInfo.teacherName,callback:function(t){e.$set(e.projectInfo,"teacherName",t)},expression:"projectInfo.teacherName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目类型"}},[l("el-input",{attrs:{disabled:""},model:{value:e.projectInfo.projectType,callback:function(t){e.$set(e.projectInfo,"projectType",t)},expression:"projectInfo.projectType"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"特殊资源"}},[l("el-input",{attrs:{disabled:""},model:{value:e.resource,callback:function(t){e.resource=t},expression:"resource"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"开始时间"}},[l("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"date",disabled:"",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.projectInfo.startTime,callback:function(t){e.$set(e.projectInfo,"startTime",t)},expression:"projectInfo.startTime"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"开始时间"}},[l("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"date",disabled:"",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.projectInfo.endTime,callback:function(t){e.$set(e.projectInfo,"endTime",t)},expression:"projectInfo.endTime"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目描述"}},[l("el-input",{staticStyle:{width:"485px"},attrs:{type:"textarea",disabled:""},model:{value:e.projectInfo.projectDesc,callback:function(t){e.$set(e.projectInfo,"projectDesc",t)},expression:"projectInfo.projectDesc"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目成员"}},[l("div",[l("el-row",[l("el-table",{attrs:{data:e.memberInfo,border:"",stripe:"",disabled:""}},[l("el-table-column",{attrs:{label:"姓名",prop:"tuserInfo.name",width:"100px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"班级",prop:"tuserInfo.class",width:"100px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"学号",prop:"sid",width:"135px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"岗位",prop:"position",width:"150px",align:"center"}})],1)],1)],1)])],1)],1)]),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ViewDialogVisible=!1}}},[e._v("确 定")])],1)])],1),e._v(" "),l("el-dialog",{attrs:{title:"修改项目信息",visible:e.EidtDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.EidtDialogVisible=t}}},[l("div",[l("el-form",{ref:"projectForm",attrs:{model:e.projectInfo,"label-width":"80px",inline:""}},[l("el-form-item",{attrs:{label:"项目名称"}},[l("el-input",{staticStyle:{width:"565px"},model:{value:e.projectInfo.projectName,callback:function(t){e.$set(e.projectInfo,"projectName",t)},expression:"projectInfo.projectName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目经理"}},[l("el-input",{staticStyle:{width:"235px"},model:{value:e.projectInfo.managerName,callback:function(t){e.$set(e.projectInfo,"managerName",t)},expression:"projectInfo.managerName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"指导老师"}},[l("el-input",{staticStyle:{width:"235px"},model:{value:e.projectInfo.teacherName,callback:function(t){e.$set(e.projectInfo,"teacherName",t)},expression:"projectInfo.teacherName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目类型"}},[l("el-input",{staticStyle:{width:"235px"},model:{value:e.projectInfo.projectType,callback:function(t){e.$set(e.projectInfo,"projectType",t)},expression:"projectInfo.projectType"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"特殊资源"}},[l("el-input",{staticStyle:{width:"235px"},model:{value:e.resource,callback:function(t){e.resource=t},expression:"resource"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"开始时间"}},[l("el-date-picker",{staticStyle:{width:"235px"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.projectInfo.startTime,callback:function(t){e.$set(e.projectInfo,"startTime",t)},expression:"projectInfo.startTime"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"开始时间"}},[l("el-date-picker",{staticStyle:{width:"235px"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.projectInfo.endTime,callback:function(t){e.$set(e.projectInfo,"endTime",t)},expression:"projectInfo.endTime"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目描述"}},[l("el-input",{staticStyle:{width:"565px"},attrs:{type:"textarea"},model:{value:e.projectInfo.projectDesc,callback:function(t){e.$set(e.projectInfo,"projectDesc",t)},expression:"projectInfo.projectDesc"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"项目成员"}},[l("div",[l("el-table",{attrs:{data:e.memberInfo,border:"",stripe:""}},[l("el-table-column",{attrs:{label:"姓名",prop:"tuserInfo.name",width:"110px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"班级",prop:"tuserInfo.class",width:"110px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"学号",prop:"sid",width:"135px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"岗位",prop:"position",width:"160px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"130px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(t){e.addDialogVisible=!0}}}),e._v(" "),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(l){return e.removeUserBySno(t.row.sid)}}})]}}])})],1)],1)])],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.EidtDialogVisible=!1}}},[e._v("取消修改")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onEditSubmit()}}},[e._v("保存修改")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"注意",visible:e.DeleteDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.DeleteDialogVisible=t}}},[l("span",[e._v("  项目删除后不可恢复，请谨慎操作！")]),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.DeleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.deleteProject(e.deleteRow)}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"添加新成员",visible:e.addDialogVisible,width:"30%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[l("el-form",{ref:"addFormRef",attrs:{model:e.newMemberInfo,"label-width":"70px"}},[l("el-form-item",{attrs:{label:"班级",prop:"class"}},[l("el-select",{attrs:{placeholder:"选择成员所在班级",clearable:"",size:"medium"},model:{value:e.newMemberInfo.tuserInfo.class,callback:function(t){e.$set(e.newMemberInfo.tuserInfo,"class",t)},expression:"newMemberInfo.tuserInfo.class"}},e._l(e.classList,function(e){return l("el-option",{key:e.class,attrs:{label:e.class,value:e.class}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"姓名",prop:"name"}},[l("el-select",{attrs:{placeholder:"选择成员姓名",clearable:"",size:"medium"},model:{value:e.newMemberInfo.tuserInfo.name,callback:function(t){e.$set(e.newMemberInfo.tuserInfo,"name",t)},expression:"newMemberInfo.tuserInfo.name"}},e._l(e.selectorInfo,function(t){return e.newMemberInfo.tuserInfo.class==t.class?l("el-option",{key:t.name,attrs:{label:t.name,value:t.name}}):e._e()}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"学号",prop:"sid"}},[l("el-select",{attrs:{placeholder:"成员学号",clearable:"",size:"medium"},model:{value:e.newMemberInfo.sid,callback:function(t){e.$set(e.newMemberInfo,"sid",t)},expression:"newMemberInfo.sid"}},e._l(e.selectorInfo,function(t){return e.newMemberInfo.tuserInfo.name==t.name?l("el-option",{key:t.sid,attrs:{label:t.sid,value:t.sid}}):e._e()}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"角色",prop:"position"}},[l("el-select",{attrs:{placeholder:"可通过输入创建新选项","allow-create":"",filterable:"",clearable:"",size:"medium"},model:{value:e.newMemberInfo.position,callback:function(t){e.$set(e.newMemberInfo,"position",t)},expression:"newMemberInfo.position"}},e._l(e.positionOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addMemberCommit(e.newMemberInfo)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},a=l("VU/8")({name:"ProjectList",methods:{handleViewClick:function(e){var t=this,l=this,o=e.pid;this.$get("project/all?pid="+o).then(function(e){l.projectInfo=e.data.data[0]}),this.$get("project/all_member_info?pid="+o).then(function(e){t.memberInfo=e.data.data}),this.ViewDialogVisible=!0},handleEditClick:function(e){var t=this;this.editRow=e;var l=this,o=e.pid;this.$get("project/all?pid="+o).then(function(e){l.projectInfo=e.data.data[0]}),this.$get("project/all_member_info?pid="+o).then(function(e){t.memberInfo=e.data.data}),this.EidtDialogVisible=!0},onEditSubmit:function(e){var t=this,l=this.editRow.pid;this.EidtDialogVisible=!1,this.$put("project?pid="+l,this.projectInfo).then(function(e){t.$message.success("项目基本信息修改成功！")});for(var o=[],a=0;a<this.memberInfo.length;a++)o[a]={},o[a].sid=this.memberInfo[a].sid,o[a].position=this.memberInfo[a].position;var i={pid:l,member:o};this.$put("project/member_info?pid="+l,i).then(function(e){t.$message.success("项目成员信息修改成功！")})},handleDeleteClick:function(e){this.deleteRow=e,this.DeleteDialogVisible=!0},deleteProject:function(e){var t=this;this.$delete("project?pid="+e.pid).then(function(e){t.$message.success("该项目已成功删除！")}),this.DeleteDialogVisible=!1},removeUserBySno:function(e){for(var t=0;t<this.memberInfo.length;t++)this.memberInfo[t].sid===e&&this.memberInfo.splice(t,1)},addDialogClosed:function(){this.newMemberInfo={sid:"",position:"",tuserInfo:{name:"",class:""}}},addMemberCommit:function(e){for(var t=!1,l=0;l<this.studentInProject.length;l++)this.studentInProject[l].sid==e.sid&&(t=!0);t?this.$message.error("该学生已加入一个项目，请勿重复添加！"):(this.memberInfo.push(e),this.$message.success("添加新成员成功！")),this.addDialogVisible=!1}},data:function(){return{editRow:{},tableData:[],projectInfo:{},memberInfo:[],ViewDialogVisible:!1,EidtDialogVisible:!1,DeleteDialogVisible:!1,addDialogVisible:!1,deleteRow:{},resource:"服务器算力资源",newMemberInfo:{sid:"",position:"",tuserInfo:{name:"",class:""}},studentInProject:[],createdPid:"",positionOptions:[{value:"项目经理",label:"项目经理"},{value:"系统设计师",label:"系统设计师"},{value:"系统分析师",label:"系统分析师"},{value:"前端工程师",label:"前端工程师"},{value:"后端工程师",label:"后端工程师"},{value:"测试工程师",label:"测试工程师"},{value:"文档管理员",label:"文档管理员"},{value:"数据库管理员",label:"数据库管理员"}],classList:[],selectorInfo:[]}},mounted:function(){var e=this,t=this;this.$get("project/all").then(function(t){e.tableData=t.data.data}),this.$get("project/all_class").then(function(e){t.classList=e.data.data,t.classList=t.classList.reverse()}),this.$get("project/all_stu").then(function(e){t.selectorInfo=e.data.data}),this.$get("project/all_member_info").then(function(e){t.studentInProject=e.data.data})}},o,!1,function(e){l("v6Pl")},"data-v-5a5490d2",null);t.default=a.exports},v6Pl:function(e,t){}});